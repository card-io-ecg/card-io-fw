<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Card/IO configuration</title>
    <style type="text/css">
        body {
            font-family: Arial, Helvetica, sans-serif;
            background-color: #ddd;
            font-size: 14px;
            padding: 1em;
        }

        #container {
            margin: 0 auto;
            background-color: #eee;
            border-radius: 1em;
            max-width: 800px;
            padding: 2em;
        }

        #content {
            margin: 2em 1em;
        }

        #footer {
            color: #999;
        }

        .tpl {
            display: none;
        }
    </style>
</head>

<body>
    <div id="container">
        <div id="header"><a id="logo">Header</a></div>
        <div id="content"></div>
        <div id="footer">2023 Card/IO</div>
    </div>

    <div id="template-demo" class="tpl">
        <h1>Welcome!</h1>
        <p id="data"></p>
    </div>

    <div id="template-spinner" class="tpl">
        <h1>Loading...</h1>
    </div>
</body>

<script>
    $id = (id) => document.getElementById(id);
    $tpl = (id) => $id(id).cloneNode(true);
    $clear = (name) => {
        let elem = $id(name);
        while (elem.firstChild) {
            elem.removeChild(elem.lastChild);
        }
    }
    $show = (tpl) => {
        tpl.style.display = "block";
        $id("content").appendChild(tpl);
    }
    $showSpinner = () => {
        $clear("content");
        $show($tpl("template-spinner"));
    }
    $on = (name, event, callback) => {
        $id(name).addEventListener(event, callback);
    }

    $fe = {
        start: async () => {
            $showSpinner();

            let res = await fetch('/demo');

            let tpl = $tpl("template-demo");
            tpl.querySelector("#data").innerHTML = await res.text();

            $clear("content");
            $show(tpl);
        }
    };

    $on("logo", "click", $fe.start);
    document.addEventListener("DOMContentLoaded", $fe.start);
</script>

</html>